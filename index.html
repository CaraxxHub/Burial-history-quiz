<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Burial History Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for the Inter font and general body layout */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Ensure buttons have pointer cursor */
        button {
            cursor: pointer;
        }
        /* Basic styling for the message box to replace alert() */
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem; /* rounded-lg */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-xl */
            z-index: 1000;
            text-align: center;
            max-width: 90%;
            width: 400px;
            border: 1px solid #d1d5db; /* border-gray-300 */
        }
        .message-box-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
    </style>
</head>
<body class="min-h-screen bg-gray-100 flex items-center justify-center p-4">
    <div id="quiz-container" class="bg-white p-8 rounded-lg shadow-xl w-full max-w-2xl">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">Burial History Quiz</h1>

        <div id="quiz-content">
            <div class="text-center text-gray-500">Loading quiz...</div>
        </div>
    </div>

    <div id="message-box-overlay" class="message-box-overlay hidden"></div>
    <div id="message-box" class="message-box hidden">
        <p id="message-box-text" class="text-lg font-medium text-gray-800 mb-4"></p>
        <button id="message-box-close" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">OK</button>
    </div>

    <script>
        // Quiz data
        const quizQuestions = [
            {
                "question": "Using the data in Table 2 of the assignment, and the provided average porosity for sandstone (25%), what is the approximate decompacted thickness of the Lower Cretaceous Sandstone (Layer 4) at the time of its deposition? (Present Thickness = 250m)",
                "answerOptions": [
                    {
                        "text": "187.5 m",
                        "rationale": "This value results from multiplying the present thickness by the porosity, rather than using the porosity to calculate the original volume of solids.",
                        "isCorrect": false
                    },
                    {
                        "text": "250 m",
                        "rationale": "This is the present-day thickness, which does not account for the compaction the layer has undergone since deposition.",
                        "isCorrect": false
                    },
                    {
                        "text": "333.3 m",
                        "rationale": "This calculation correctly applies the formula: Decompacted Thickness = Present Thickness / (1 - Average Porosity). For Layer 4: 250m / (1 - 0.25) = 250m / 0.75.",
                        "isCorrect": true
                    },
                    {
                        "text": "312.5 m",
                        "rationale": "This value might arise from an incorrect application of the porosity value in the decompaction formula.",
                        "isCorrect": false
                    }
                ],
                "hint": "Recall the formula for decompaction: H_decompacted = H_present / (1 - avg_porosity)."
            },
            {
                "question": "In the assignment (Table 2), if the Fort Union Formation (Layer 1) has a decompacted thickness of 650m and the Hell Creek Formation (Layer 2) has a decompacted thickness of 200m, what would be the burial depth of the *top* of the Pierre Shale (Layer 3) just *before* the deposition of the Hell Creek Formation, assuming the Pierre Shale was deposited at a paleobathymetry of 100m?",
                "answerOptions": [
                    {
                        "text": "100 m",
                        "rationale": "This is the paleobathymetry of the Pierre Shale at its deposition, not its burial depth after subsequent layers were deposited.",
                        "isCorrect": false
                    },
                    {
                        "text": "750 m",
                        "rationale": "This depth correctly accounts for the paleobathymetry of the Pierre Shale plus the decompacted thickness of the overlying Fort Union Formation only. The question asks for the depth *before* Hell Creek deposition.",
                        "isCorrect": true
                    },
                    {
                        "text": "850 m",
                        "rationale": "This depth includes the paleobathymetry plus the decompacted thickness of both the Fort Union and Hell Creek formations; however, the question asks for the depth *before* the Hell Creek formation was deposited.",
                        "isCorrect": false
                    },
                    {
                        "text": "650 m",
                        "rationale": "This is the decompacted thickness of the Fort Union Formation alone, not the burial depth of the Pierre Shale.",
                        "isCorrect": false
                    }
                ],
                "hint": "The burial depth of a horizon is its initial depositional depth plus the sum of the decompacted thicknesses of all overlying layers deposited up to that point in time."
            },
            {
                "question": "On a burial history plot, what does an upward turn (shallowing) of a specific layer's burial path, followed by a horizontal segment and then renewed burial, typically represent?",
                "answerOptions": [
                    {
                        "text": "A period of rapid, continuous subsidence.",
                        "rationale": "Rapid, continuous subsidence would be shown by a steep downward trend in the burial path.",
                        "isCorrect": false
                    },
                    {
                        "text": "Deposition in a progressively deepening marine environment.",
                        "rationale": "Deposition in a deepening marine environment would increase paleobathymetry and contribute to a downward burial trend, not an upward turn.",
                        "isCorrect": false
                    },
                    {
                        "text": "An unconformity, representing uplift, erosion, and subsequent renewed deposition.",
                        "rationale": "Uplift causes the layer to move to a shallower depth (upward turn), erosion or non-deposition is the horizontal segment, and renewed deposition resumes the downward burial path.",
                        "isCorrect": true
                    },
                    {
                        "text": "Instantaneous compaction of the underlying sediments.",
                        "rationale": "Compaction reduces thickness but doesn't typically cause an upward turn in the burial path of a specific horizon unless associated with regional uplift.",
                        "isCorrect": false
                    }
                ],
                "hint": "Consider what geological processes lead to the removal of previously deposited rock and a break in the sedimentary record."
            },
            {
                "question": "If a basin has an average heat flow (Q) of 60 mW/m² and an average thermal conductivity (Kb) of 2.0 W/m°C, what is the geothermal gradient (G)?",
                "answerOptions": [
                    {
                        "text": "30 °C/km",
                        "rationale": "The geothermal gradient is calculated as G = Q / Kb. Ensure units are consistent (mW/m² to W/m²). 60 mW/m² = 0.060 W/m². So, G = 0.060 W/m² / 2.0 W/m°C = 0.030 °C/m, which is 30 °C/km.",
                        "isCorrect": true
                    },
                    {
                        "text": "120 °C/km",
                        "rationale": "This value results from multiplying heat flow by thermal conductivity, not dividing.",
                        "isCorrect": false
                    },
                    {
                        "text": "0.03 °C/km",
                        "rationale": "This value is correct in °C/m but the options are in °C/km. Remember to convert meters to kilometers.",
                        "isCorrect": false
                    },
                    {
                        "text": "33.3 °C/km",
                        "rationale": "This value results from incorrectly dividing thermal conductivity by heat flow.",
                        "isCorrect": false
                    }
                ],
                "hint": "The formula for geothermal gradient is G = Q / Kb. Pay attention to units: Q is often in mW/m² and needs to be converted to W/m² (1 W = 1000 mW)."
            },
            {
                "question": "Using the geothermal gradient of 26°C/km (calculated from Q=65 mW/m² and Kb=2.5 W/m°C in the assignment) and a surface temperature (Ts) of 10°C, what is the approximate temperature at a depth (Z) of 2000 meters (2 km)?",
                "answerOptions": [
                    {
                        "text": "52°C",
                        "rationale": "This calculation forgets to add the surface temperature (Ts) to the temperature increase due to depth (G * Z).",
                        "isCorrect": false
                    },
                    {
                        "text": "62°C",
                        "rationale": "Temperature at depth is calculated as T = Ts + (G * Z). So, T = 10°C + (26°C/km * 2 km) = 10°C + 52°C.",
                        "isCorrect": true
                    },
                    {
                        "text": "36°C",
                        "rationale": "This might result from an arithmetic error or incorrectly applying the surface temperature.",
                        "isCorrect": false
                    },
                    {
                        "text": "26°C",
                        "rationale": "This is the geothermal gradient per kilometer, not the temperature at 2km depth.",
                        "isCorrect": false
                    }
                ],
                "hint": "Recall the formula: Temperature (T) at depth (Z) = Surface Temperature (Ts) + (Geothermal Gradient (G) * Z)."
            },
            {
                "question": "On a burial history plot, a very steep, nearly vertical downward segment for a particular formation indicates:",
                "answerOptions": [
                    {
                        "text": "A long period of very slow, continuous sediment accumulation.",
                        "rationale": "Slow accumulation would result in a gentle, less steep downward slope over a long time interval.",
                        "isCorrect": false
                    },
                    {
                        "text": "A major erosional event removing overlying strata.",
                        "rationale": "An erosional event would typically be represented by an upward (shallowing) trend if the layer itself is exhumed, or a hiatus.",
                        "isCorrect": false
                    },
                    {
                        "text": "A short period of very rapid sediment deposition and burial.",
                        "rationale": "A steep downward slope signifies a large increase in depth over a relatively short period of geological time, characteristic of rapid deposition.",
                        "isCorrect": true
                    },
                    {
                        "text": "The formation remained at or near the surface for an extended time.",
                        "rationale": "Remaining near the surface would be shown as a nearly horizontal line at shallow depth.",
                        "isCorrect": false
                    }
                ],
                "hint": "Consider how the rate of change in depth over time is represented graphically."
            },
            {
                "question": "If the Bakken Formation (Layer 6 in Table 2) is an organic-rich shale, and the 'oil window' is generally considered to be between 60°C and 120°C, when would this formation begin generating oil based on its burial history curve and the overlaid iso-temperature lines?",
                "answerOptions": [
                    {
                        "text": "Immediately after its deposition at 359 Ma.",
                        "rationale": "At the time of deposition, the formation would be at a relatively shallow depth and low temperature, likely below the oil window.",
                        "isCorrect": false
                    },
                    {
                        "text": "When its burial path first crosses the 60°C iso-temperature line.",
                        "rationale": "The oil window starts when the source rock reaches the minimum temperature required for oil generation (60°C in this case). This is shown where its burial path intersects the corresponding iso-temperature line.",
                        "isCorrect": true
                    },
                    {
                        "text": "Only after it has passed through the 120°C iso-temperature line.",
                        "rationale": "Passing 120°C signifies entering the gas window or potentially the end of the main oil generation phase, not the beginning.",
                        "isCorrect": false
                    },
                    {
                        "text": "During the erosion event between 100-90 Ma.",
                        "rationale": "An erosion event involves uplift and cooling, which would halt or reverse maturation, not initiate oil generation.",
                        "isCorrect": false
                    }
                ],
                "hint": "The 'oil window' defines a specific temperature range. Identify when the source rock enters this range."
            },
            {
                "question": "Which of the following lithologies from the assignment's Table 2 would likely experience the MOST significant *mechanical compaction* during the early stages of burial (e.g., first 1000-2000m)?",
                "answerOptions": [
                    {
                        "text": "Dolomite/Anhydrite (Ordovician Red River Fm.)",
                        "rationale": "Dolomite and anhydrite are relatively rigid and experience less mechanical compaction compared to fine-grained clastics.",
                        "isCorrect": false
                    },
                    {
                        "text": "Sandstone (Lower Cretaceous Sandstone)",
                        "rationale": "Sandstones undergo mechanical compaction, but typically less than shales due to stronger grain contacts and often lower initial porosity.",
                        "isCorrect": false
                    },
                    {
                        "text": "Shale (Pierre Shale or Jurassic Shale)",
                        "rationale": "Shales have high initial porosity and are composed of fine-grained clay minerals that readily reorient and dewater under load, leading to significant mechanical compaction.",
                        "isCorrect": true
                    },
                    {
                        "text": "Lignite (within Fort Union Formation)",
                        "rationale": "Lignite is highly compressible, but shales are a more broadly representative example of significant mechanical compaction among common sedimentary rocks.",
                        "isCorrect": false
                    }
                ],
                "hint": "Consider which rock type typically has the highest initial porosity and is composed of particles that can easily be rearranged under pressure."
            },
            {
                "question": "What is the primary purpose of the 'backstripping' technique in burial history analysis?",
                "answerOptions": [
                    {
                        "text": "To calculate the present-day thickness of formations from seismic data.",
                        "rationale": "Calculating present-day thickness is a direct measurement or interpretation, not the primary goal of backstripping.",
                        "isCorrect": false
                    },
                    {
                        "text": "To estimate the original paleobathymetry of ancient marine sediments.",
                        "rationale": "Paleobathymetry is an input for backstripping, not its primary output. It's estimated from facies and fossils.",
                        "isCorrect": false
                    },
                    {
                        "text": "To isolate the tectonic subsidence component by removing the effects of sediment and water loading.",
                        "rationale": "Backstripping systematically removes sediment and water loads (and their isostatic effects) to reveal the subsidence driven purely by tectonic forces.",
                        "isCorrect": true
                    },
                    {
                        "text": "To determine the exact age of unconformities in the stratigraphic record.",
                        "rationale": "The age of unconformities is determined by dating overlying and underlying strata, not by backstripping itself.",
                        "isCorrect": false
                    }
                ],
                "hint": "Think about what factors contribute to total basin subsidence and how we might separate the underlying crustal movement."
            },
            {
                "question": "In constructing a burial history, why is an accurate estimation of paleobathymetry crucial for deeper time intervals?",
                "answerOptions": [
                    {
                        "text": "Because paleobathymetry directly influences the present-day color of the sedimentary rocks.",
                        "rationale": "While depositional environment can affect rock color, paleobathymetry itself doesn't directly determine the present-day color.",
                        "isCorrect": false
                    },
                    {
                        "text": "Because it is a primary control on the type of fossils preserved, which are used for dating.",
                        "rationale": "Fossils are indeed used for dating, but paleobathymetry itself is not the primary control on the *type* of fossils in a way that fundamentally changes dating accuracy.",
                        "isCorrect": false
                    },
                    {
                        "text": "Because it affects the initial sediment thickness and thus the total burial depth and thermal history.",
                        "rationale": "Paleobathymetry determines the initial water depth above the sediment, which contributes to the total load and influences compaction, subsidence, and ultimately the thermal history, especially for deeper time intervals with significant water depths.",
                        "isCorrect": true
                    },
                    {
                        "text": "Because it dictates the type of seismic equipment that can be used to image subsurface structures.",
                        "rationale": "While water depth affects seismic acquisition, paleobathymetry of ancient sediments doesn't directly impact the choice of modern seismic equipment.",
                        "isCorrect": false
                    }
                ],
                "hint": "Consider how the initial water depth influences the subsequent burial and thermal evolution of sediments."
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let shuffledOptions = [];
        let selectedAnswerIndex = null; // Stores the index of the option the user selected for the current question

        const quizContent = document.getElementById('quiz-content');
        const messageBox = document.getElementById('message-box');
        const messageBoxText = document.getElementById('message-box-text');
        const messageBoxCloseButton = document.getElementById('message-box-close');
        const messageBoxOverlay = document.getElementById('message-box-overlay');

        // --- Helper Functions ---

        // Function to shuffle an array (Fisher-Yates algorithm)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Function to show a custom message box (replaces alert())
        function showMessageBox(message) {
            messageBoxText.textContent = message;
            messageBox.classList.remove('hidden');
            messageBoxOverlay.classList.remove('hidden');
        }

        // Function to hide the custom message box
        function hideMessageBox() {
            messageBox.classList.add('hidden');
            messageBoxOverlay.classList.add('hidden');
        }

        // --- Core Quiz Logic ---

        // Function to display the current question
        function displayQuestion() {
            // Check if all questions are answered
            if (currentQuestionIndex >= quizQuestions.length) {
                showResults();
                return;
            }

            const currentQuestion = quizQuestions[currentQuestionIndex];
            shuffledOptions = shuffleArray([...currentQuestion.answerOptions]); // Shuffle options for the current question
            selectedAnswerIndex = null; // Reset selected answer for the new question

            // Construct the HTML for the current question
            quizContent.innerHTML = `
                <div class="text-gray-600 text-lg mb-4">
                    Question ${currentQuestionIndex + 1} / ${quizQuestions.length}
                </div>
                <div class="bg-blue-50 p-4 rounded-md mb-6">
                    <p class="text-xl font-medium text-gray-900 mb-4">
                        ${currentQuestion.question}
                    </p>
                    ${currentQuestion.hint ? `<p class="text-sm text-gray-700 italic">Hint: ${currentQuestion.hint}</p>` : ''}
                </div>
                <div id="answer-options" class="grid grid-cols-1 gap-4 mb-6">
                    ${shuffledOptions.map((option, index) => `
                        <button
                            class="p-4 rounded-md border text-left transition-all duration-300 bg-gray-50 border-gray-300 hover:bg-gray-100"
                            data-index="${index}"
                        >
                            ${option.text}
                        </button>
                    `).join('')}
                </div>
                <div id="rationale-display" class="hidden p-4 rounded-md mb-6"></div>
                <div class="flex justify-end">
                    <button id="next-button" class="px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 transition duration-300 opacity-50 cursor-not-allowed" disabled>
                        ${currentQuestionIndex === quizQuestions.length - 1 ? 'Finish Quiz' : 'Next Question'}
                    </button>
                </div>
            `;

            // Add event listeners to newly created answer buttons
            document.querySelectorAll('#answer-options button').forEach(button => {
                button.addEventListener('click', handleAnswerClick);
            });

            // Add event listener to the next button
            document.getElementById('next-button').addEventListener('click', handleNextQuestion);
        }

        // Handle user's answer selection
        function handleAnswerClick(event) {
            // If an answer has already been selected for this question, do nothing
            if (selectedAnswerIndex !== null) return;

            const clickedButton = event.currentTarget;
            const index = parseInt(clickedButton.dataset.index); // Get the index of the clicked option
            selectedAnswerIndex = index; // Store the selected index

            const selectedOption = shuffledOptions[index];
            const rationaleDisplay = document.getElementById('rationale-display');
            const nextButton = document.getElementById('next-button');

            // Update button styles and rationale display
            document.querySelectorAll('#answer-options button').forEach((button, btnIndex) => {
                button.disabled = true; // Disable all answer buttons after selection

                if (shuffledOptions[btnIndex].isCorrect) {
                    // Always highlight the correct answer
                    button.classList.add('bg-green-100', 'border-green-500');
                    button.classList.remove('bg-gray-50', 'border-gray-300', 'hover:bg-gray-100');
                    // Add a stronger visual cue if it's the correct answer
                    button.classList.add('ring-2', 'ring-green-300');
                } else if (btnIndex === selectedAnswerIndex) {
                    // If the user selected an incorrect answer
                    button.classList.add('bg-red-100', 'border-red-500');
                    button.classList.remove('bg-gray-50', 'border-gray-300', 'hover:bg-gray-100');
                } else {
                    // Dim other unselected incorrect options
                    button.classList.add('opacity-70', 'cursor-not-allowed');
                }
            });

            // Display rationale
            if (selectedOption.isCorrect) {
                score++; // Increment score if correct
                rationaleDisplay.className = 'p-4 rounded-md mb-6 bg-green-50 text-green-800 border border-green-400';
            } else {
                rationaleDisplay.className = 'p-4 rounded-md mb-6 bg-red-50 text-red-800 border border-red-400';
            }
            rationaleDisplay.innerHTML = `<p class="font-semibold mb-2">Rationale:</p><p>${selectedOption.rationale}</p>`;
            rationaleDisplay.classList.remove('hidden');

            // Enable the next button
            nextButton.disabled = false;
            nextButton.classList.remove('opacity-50', 'cursor-not-allowed');
        }

        // Handle moving to the next question
        function handleNextQuestion() {
            currentQuestionIndex++;
            displayQuestion(); // Display the next question or results
        }

        // Show the final results screen
        function showResults() {
            quizContent.innerHTML = `
                <div class="text-center">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4">Quiz Results</h2>
                    <p class="text-lg text-gray-600">You scored ${score} out of ${quizQuestions.length}!</p>
                    <button id="restart-button" class="mt-6 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:shadow-outline">Play Again</button>
                </div>
            `;
            // Add event listener to the restart button
            document.getElementById('restart-button').addEventListener('click', resetQuiz);
        }

        // Restart the quiz from the beginning
        function resetQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            selectedAnswerIndex = null; // Reset selected answer
            displayQuestion(); // Start the quiz over
        }

        // --- Event Listeners for Message Box ---
        messageBoxCloseButton.addEventListener('click', hideMessageBox);
        messageBoxOverlay.addEventListener('click', hideMessageBox); // Close if clicking outside

        // Initial call to display the first question when the page loads
        document.addEventListener('DOMContentLoaded', displayQuestion);
    </script>
</body>
</html>
